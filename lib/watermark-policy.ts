import { getPlan } from '@/lib/entitlements';

export type WatermarkContext = {
  planId: string | null;
  isTrialing?: boolean;
};

export function shouldDisplayWatermark({ planId, isTrialing = false }: WatermarkContext): boolean {
  if (!planId) {
    return true;
  }

  const plan = getPlan(planId);
  if (!plan) {
    return true;
  }

  // Free plan shows watermark, paid plans don't
  if (plan.priceUSD === 0) {
    return true;
  }

  return isTrialing;
}

export function watermarkCopy(): string {
  return 'Draft export Â· Generated by KatoSuite';
}
